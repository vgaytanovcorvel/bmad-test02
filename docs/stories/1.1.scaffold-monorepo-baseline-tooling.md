# Story 1.1: Scaffold Monorepo and Baseline Tooling

## Status
Done

## Story
**As a** development team,
**I want** a fully configured Nx monorepo workspace with Angular, Vite, Tailwind, and quality tooling,
**so that** we can begin TDD development with a solid foundation, proper project structure, and automated quality checks.

## Acceptance Criteria
1. Nx workspace created with PNPM; layout initialized: `apps/ui`, `libs/engine`, `libs/shared`, `apps/ui-e2e` (Playwright project).
2. Angular app configured to use Vite builder; TypeScript strict mode enabled globally.
3. Tailwind CSS integrated with PostCSS; base theme utilities available in the UI app.
4. ESLint + Prettier configured; formatter and linter scripts available to run locally.
5. README updated with setup, run, and test commands.

## Tasks / Subtasks

- [x] **Task 1: Create Nx Workspace Foundation** (AC: 1)
  - [x] Initialize Nx workspace with PNPM: `npx create-nx-workspace@latest tic-tac-toe-showcase --preset=angular-monorepo --packageManager=pnpm`
  - [x] Verify workspace structure includes standard Nx directories
  - [x] Configure PNPM workspace settings in root `package.json`
  - [x] Create required library directories: `libs/engine`, `libs/shared`
  - [x] Initialize Angular app in `apps/ui` following project structure standards
  - [x] Create Playwright E2E project in `apps/ui-e2e`

- [x] **Task 2: Configure Angular App with Vite and TypeScript** (AC: 2)
  - [x] Configure Vite builder in `apps/ui/project.json` as primary build tool
  - [x] Enable TypeScript strict mode in `tsconfig.base.json` globally
  - [x] Set up standalone component architecture in Angular app
  - [x] Configure environment files for development and production
  - [x] Verify Angular 17+ features are enabled (signals, new control flow)

- [x] **Task 3: Integrate Tailwind CSS** (AC: 3)
  - [x] Install Tailwind CSS and PostCSS dependencies
  - [x] Configure `tailwind.config.js` in `apps/ui` with custom theme utilities
  - [x] Set up PostCSS configuration for processing
  - [x] Create base styles structure: `apps/ui/src/styles/globals.scss`, `tailwind.scss`
  - [x] Verify Tailwind utilities are available in Angular components

- [x] **Task 4: Configure ESLint and Prettier** (AC: 4)
  - [x] Set up ESLint with Angular-specific rules and TypeScript support
  - [x] Configure Prettier for consistent code formatting
  - [x] Create `.eslintrc.json` and `.prettierrc` configuration files
  - [x] Add package scripts: `lint`, `format`, `lint:fix`
  - [x] Test linting and formatting on sample files

- [x] **Task 5: Initialize Library Projects** (AC: 1)
  - [x] Generate `libs/engine` library with proper barrel exports
  - [x] Generate `libs/shared` library for common types and utilities
  - [x] Configure TypeScript path mapping in `tsconfig.base.json` for library imports
  - [x] Set up basic index.ts files with placeholder exports
  - [x] Verify libraries can be imported from Angular app

- [x] **Task 6: Set Up Package Scripts and README** (AC: 5)
  - [x] Add essential scripts to root `package.json`: `serve`, `build`, `test`, `lint`
  - [x] Create comprehensive README.md with setup instructions
  - [x] Document installation: `pnpm install`
  - [x] Document development server: `pnpm nx serve ui`
  - [x] Document build process: `pnpm nx build ui`
  - [x] Document testing commands: `pnpm nx test ui`
  - [x] Add troubleshooting section for common setup issues

## Dev Notes

### Project Structure Standards
[Source: docs/ui-architecture/project-structure.md]

The workspace must follow the defined project structure:
```
tic-tac-toe-showcase/
├── apps/
│   ├── ui/                          # Main Angular application
│   │   ├── src/
│   │   │   ├── app/
│   │   │   │   ├── components/      # Standalone Angular components
│   │   │   │   ├── pages/           # Route components  
│   │   │   │   ├── services/        # Angular services
│   │   │   │   ├── app.routes.ts    # Route configuration
│   │   │   │   ├── app.config.ts    # App configuration
│   │   │   │   └── app.component.ts # Root component
│   │   │   ├── assets/              # Static assets
│   │   │   ├── styles/              # Global styles
│   │   │   │   ├── globals.scss
│   │   │   │   └── tailwind.scss
│   │   │   ├── environments/        # Environment configs
│   │   │   ├── index.html
│   │   │   └── main.ts
│   │   ├── tailwind.config.js
│   │   ├── vite.config.ts
│   │   └── project.json
│   └── ui-e2e/                      # Playwright E2E tests
├── libs/
│   ├── engine/                      # Game engine library
│   └── shared/                      # Shared utilities and types
```

### Technology Stack Requirements
[Source: docs/ui-architecture/frontend-tech-stack.md]

Required technology versions and purposes:
- **Framework**: Angular 17+ (SPA Framework with standalone components, signals)
- **Build System**: Nx Latest (Monorepo tooling for modular architecture)
- **Builder**: Vite Latest (Fast HMR, modern bundling, optimal for Angular 17+)
- **Package Manager**: PNPM Latest (Efficient disk usage, workspace support)
- **UI Framework**: Tailwind CSS 3.x (Utility-first CSS, consistent design system)
- **State Management**: Angular Signals 17+ (Lightweight, built-in, reactive state)
- **TypeScript**: TypeScript 5.x (Strict mode, enhanced developer experience)
- **Linting**: ESLint Latest (Angular-specific rules, TypeScript support)
- **Formatting**: Prettier Latest (Consistent style, automated formatting)

### Development Standards to Implement
[Source: docs/ui-architecture/frontend-developer-standards.md]

Critical coding rules that must be configured:
1. **TypeScript Strict Mode**: Always use strict TypeScript configuration
2. **Standalone Components**: Use Angular 17+ standalone component pattern
3. **Modern Template Syntax**: Use `@if`, `@for` instead of structural directives
4. **Code Style**: Follow Angular style guide and enforce with ESLint/Prettier
5. **Environment Config**: Use environment files for all configuration

### Component Architecture Foundation
[Source: docs/ui-architecture/component-architecture-standards.md]

Components must follow these patterns:
- Standalone Components using Angular 17+ pattern
- OnPush Change Detection for performance optimization
- Signal-Based Reactivity using computed signals
- Dependency Injection using `inject()` function over constructor injection
- Testing Attributes: Include `data-testid` for reliable test selectors

### Testing Framework Configuration
[Source: docs/ui-architecture/testing-requirements.md]

Testing setup requirements:
- **Unit Testing**: Jest (Fast, comprehensive, excellent Angular integration)
- **Integration Testing**: @testing-library/angular (User-centric testing approach)
- **E2E Testing**: Playwright (Reliable, fast, multi-browser support)
- **Coverage Goals**: Aim for 85% code coverage (unit + integration)
- Test file naming: `*.spec.ts` for unit tests, `*.e2e-spec.ts` for E2E tests

### File and Naming Conventions
[Source: docs/ui-architecture/frontend-developer-standards.md]

File naming patterns to implement:
- Components: `game-board.component.ts`
- Services: `game.service.ts`
- Types: `game.types.ts`
- Tests: `*.spec.ts`
- E2E Tests: `*.e2e-spec.ts`

### Essential Package Scripts
Based on development workflow requirements:
- `pnpm nx serve ui` - Start development server
- `pnpm nx build ui` - Build for production  
- `pnpm nx test ui` - Run unit tests
- `pnpm nx e2e ui-e2e` - Run E2E tests
- `pnpm nx lint ui` - Lint code
- `pnpm nx graph` - View dependency graph

### Testing
[Source: docs/ui-architecture/testing-requirements.md]

Test file locations and standards:
- **Unit Tests**: Collocated with source files using `.spec.ts` extension
- **Integration Tests**: Same pattern, testing component interactions with services
- **E2E Tests**: Located in `apps/ui-e2e` using Playwright framework
- **Testing Framework**: Jest for unit/integration, Playwright for E2E
- **Test Structure**: Arrange-Act-Assert pattern
- **Coverage**: 85% threshold for unit + integration tests
- **Mock Strategy**: Mock external dependencies, test components in isolation

Testing configuration files needed:
- Jest configuration in each project's `project.json`
- Playwright configuration in `apps/ui-e2e/playwright.config.ts`
- TestBed setup for Angular component testing
- Mock factory functions for consistent test data

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-25 | 1.0 | Initial story creation from Epic 1.1 | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
James (Full Stack Developer) - v1.0

### Implementation Summary
Successfully implemented complete Nx monorepo scaffold with Angular 17+, Vite, Tailwind CSS, and quality tooling configuration.

### Key Implementation Details

**Workspace Structure Created:**
- Nx workspace with PNPM package manager
- Angular app relocated to `apps/ui/` 
- E2E tests configured in `apps/ui-e2e/`
- Libraries created: `libs/engine/`, `libs/shared/`
- TypeScript path mappings: `@libs/engine`, `@libs/shared`

**Technology Configuration:**
- Angular 17+ with `@angular/build:application` (Vite-based builder)
- TypeScript 5.x with strict mode enabled globally
- Tailwind CSS v3.4.17 with custom game theme and animations
- PostCSS integration for Tailwind processing
- ESLint + Prettier with Angular-specific rules pre-configured

**Build System:**
- Nx 21.5.3 with optimized caching and task orchestration
- PNPM workspace with efficient dependency management
- Package scripts: `serve`, `build`, `test`, `lint`, `format`
- Production build successfully tested (294.31 kB initial bundle)

**Quality Tooling:**
- ESLint passing with Angular-specific rules
- Prettier configuration for consistent formatting
- Jest unit testing framework configured
- Playwright E2E testing setup

### Debug Log References
- Fixed Nx project naming after directory restructuring
- Resolved Tailwind v4 compatibility issues by downgrading to v3.4
- Updated PostCSS configuration for proper Tailwind integration
- All linting and build processes validated successfully

### Completion Notes
- ✅ All 6 tasks and 29 subtasks completed successfully
- ✅ Build process validated (pnpm nx build ui) - PASSED
- ✅ Linting validated (pnpm nx lint ui) - PASSED  
- ✅ Project structure follows specified architecture standards
- ✅ README.md created with comprehensive setup and usage documentation
- ✅ TypeScript strict mode enabled with enhanced developer experience
- ✅ Custom Tailwind theme with game-specific colors and animations

### File List
**New Files Created:**
- `package.json` - Root package configuration with scripts
- `nx.json` - Nx workspace configuration  
- `tsconfig.base.json` - TypeScript base configuration with strict mode
- `apps/ui/tailwind.config.js` - Tailwind CSS configuration with custom theme
- `apps/ui/postcss.config.js` - PostCSS configuration
- `apps/ui/src/styles/tailwind.scss` - Tailwind base styles and components
- `apps/ui/src/styles/globals.scss` - Global application styles  
- `libs/engine/` - Game engine library (complete structure)
- `libs/shared/` - Shared utilities library (complete structure)
- `README.md` - Comprehensive project documentation

**Modified Files:**
- `apps/ui/project.json` - Updated paths and project name
- `apps/ui-e2e/project.json` - Updated project name and dependencies  
- `apps/ui/src/styles.css` - Updated to import global styles
- All Nx configuration files updated for proper project structure

## QA Results
*This section will be populated by the QA agent after implementation review*